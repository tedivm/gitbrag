# GitBrag Configuration

# Project settings
PROJECT_NAME=gitbrag
DEBUG=false

# Cache configuration
CACHE_ENABLED=true
CACHE_REDIS_HOST=
CACHE_REDIS_PORT=6379
CACHE_DEFAULT_TTL=300
CACHE_PERSISTENT_TTL=3600

# GitHub Authentication
# Choose authentication type: "pat" (Personal Access Token) or "github_app" (GitHub App OAuth)
GITHUB_AUTH_TYPE=pat

# Personal Access Token (PAT) Authentication
# Create a token at: https://github.com/settings/tokens
# Required scopes: repo (for private repos), public_repo (for public repos only)
GITHUB_TOKEN=

# GitHub App OAuth Authentication
# Create a GitHub App at: https://github.com/settings/apps
# Set callback URL to: http://localhost:8080/callback (CLI) or http://localhost/auth/callback (Web)
GITHUB_APP_CLIENT_ID=
GITHUB_APP_CLIENT_SECRET=
GITHUB_OAUTH_CALLBACK_PORT=8080

# Web Interface Settings
# Session secret key for signing cookies and encrypting tokens
# REQUIRED for web interface. Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Not needed for CLI usage.
SESSION_SECRET_KEY=

# Session expiration time in seconds (default: 86400 = 24 hours)
SESSION_MAX_AGE=86400

# OAuth callback URL for web authentication
# Development: http://localhost/auth/callback
# Production: https://yourdomain.com/auth/callback
OAUTH_CALLBACK_URL=http://localhost/auth/callback

# Require HTTPS for secure cookies (set to true in production)
REQUIRE_HTTPS=false

# OAuth scopes to request (minimal: read:user for public data only)
OAUTH_SCOPES=read:user

# Cache staleness threshold in seconds (default: 86400 = 24 hours)
# Reports older than this will be auto-refreshed by authenticated users
REPORT_CACHE_STALE_AGE=86400

# Example username to display on home page (default: tedivm)
EXAMPLE_USERNAME=tedivm

# Background Task Settings
# Timeout for background report generation tasks (default: 300 = 5 minutes)
TASK_TIMEOUT_SECONDS=300

# Maximum concurrent report generation tasks per reported GitHub username (default: 1)
# Lower values reduce API usage by allowing sequential generation to reuse cached user data
MAX_REPORTED_USER_CONCURRENT_TASKS=1

# GitHub API Concurrency Settings
# Control the number of concurrent requests to GitHub API for better reliability
# Lower values are more stable but slower; higher values are faster but may hit rate limits

# Maximum concurrent PR file fetch operations (default: 5, range: 1-20)
# Fetches file lists and code metrics for each PR. Lower values recommended for accounts with many PRs.
GITHUB_PR_FILE_FETCH_CONCURRENCY=5

# Maximum concurrent repository description fetches (default: 10, range: 1-20)
# Fetches repository descriptions for display. Can be higher as it's a simpler operation.
GITHUB_REPO_DESC_FETCH_CONCURRENCY=10
